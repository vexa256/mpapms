import{ALWAYS_SYNC_GLOBAL_EVENTS as _e,ComponentUtil as ve,_combineAttributesAndGridOptions as be,_processOnChange as Ce,_warnOnce as Ee,createGrid as ye}from"ag-grid-community";function k(e,t){const r=new Set(e.split(","));return t?s=>r.has(s.toLowerCase()):s=>r.has(s)}var Tt={},Mt=[],Re=Object.prototype.hasOwnProperty,b=(e,t)=>Re.call(e,t),g=Array.isArray,C=e=>q(e)==="[object Map]",Oe=e=>typeof e=="string",w=e=>typeof e=="symbol",E=e=>e!==null&&typeof e=="object",Ie=Object.prototype.toString,q=e=>Ie.call(e),Te=e=>q(e).slice(8,-1),F=e=>Oe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,y=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Me=/-(\w)/g,St=y(e=>e.replace(Me,(t,r)=>r?r.toUpperCase():"")),Se=/\B([A-Z])/g,At=y(e=>e.replace(Se,"-$1").toLowerCase()),Ae=y(e=>e.charAt(0).toUpperCase()+e.slice(1)),Pt=y(e=>e?`on${Ae(e)}`:""),R=(e,t)=>!Object.is(e,t),Pe=(e,t,r,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:r})},De="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Dt=k(De+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected"),Z;function xe(e,t){const r=e.get(t);r!==void 0&&t._trackId!==r&&(e.delete(t),e.size===0&&e.cleanup())}var O=!0,$=0,J=[];function Fe(){J.push(O),O=!1}function $e(){const e=J.pop();O=e===void 0?!0:e}function j(){$++}function L(){for($--;!$&&V.length;)V.shift()()}function je(e,t,r){var s;if(t.get(e)!==e._trackId){t.set(e,e._trackId);const n=e.deps[e._depsLength];n!==t?(n&&xe(n,e),e.deps[e._depsLength++]=t):e._depsLength++}}var V=[];function Le(e,t,r){var s;j();for(const n of e.keys()){let a;n._dirtyLevel<t&&(a??(a=e.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=t),n._shouldSchedule&&(a??(a=e.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&V.push(n.scheduler)))}L()}var Ve=(e,t)=>{const r=new Map;return r.cleanup=e,r.computed=t,r},z=new WeakMap,m=Symbol(""),K=Symbol("");function u(e,t,r){if(O&&Z){let s=z.get(e);s||z.set(e,s=new Map);let n=s.get(r);n||s.set(r,n=Ve(()=>s.delete(r))),je(Z,n,void 0)}}function h(e,t,r,s,n,a){const o=z.get(e);if(!o)return;let i=[];if(t==="clear")i=[...o.values()];else if(r==="length"&&g(e)){const l=Number(s);o.forEach((f,d)=>{(d==="length"||!w(d)&&d>=l)&&i.push(f)})}else switch(r!==void 0&&i.push(o.get(r)),t){case"add":g(e)?F(r)&&i.push(o.get("length")):(i.push(o.get(m)),C(e)&&i.push(o.get(K)));break;case"delete":g(e)||(i.push(o.get(m)),C(e)&&i.push(o.get(K)));break;case"set":C(e)&&i.push(o.get(m));break}j();for(const l of i)l&&Le(l,4,void 0);L()}var ze=k("__proto__,__v_isRef,__isVue"),Q=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(w)),X=Ke();function Ke(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const s=c(this);for(let a=0,o=this.length;a<o;a++)u(s,"get",a+"");const n=s[t](...r);return n===-1||n===!1?s[t](...r.map(c)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Fe(),j();const s=c(this)[t].apply(this,r);return L(),$e(),s}}),e}function Ue(e){w(e)||(e=String(e));const t=c(this);return u(t,"has",e),t.hasOwnProperty(e)}var ee=class{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){const s=this._isReadonly,n=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return n;if(t==="__v_raw")return r===(s?n?et:ie:n?Xe:oe).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=g(e);if(!s){if(a&&b(X,t))return Reflect.get(X,t,r);if(t==="hasOwnProperty")return Ue}const o=Reflect.get(e,t,r);return(w(t)?Q.has(t):ze(t))||(s||u(e,"get",t),n)?o:G(o)?a&&F(t)?o:o.value:E(o)?s?ce(o):le(o):o}},Be=class extends ee{constructor(e=!1){super(!1,e)}set(e,t,r,s){let n=e[t];if(!this._isShallow){const i=B(n);if(!nt(r)&&!B(r)&&(n=c(n),r=c(r)),!g(e)&&G(n)&&!G(r))return i?!1:(n.value=r,!0)}const a=g(e)&&F(t)?Number(t)<e.length:b(e,t),o=Reflect.set(e,t,r,s);return e===c(s)&&(a?R(r,n)&&h(e,"set",t,r,n):h(e,"add",t,r)),o}deleteProperty(e,t){const r=b(e,t),s=e[t],n=Reflect.deleteProperty(e,t);return n&&r&&h(e,"delete",t,void 0,s),n}has(e,t){const r=Reflect.has(e,t);return(!w(t)||!Q.has(t))&&u(e,"has",t),r}ownKeys(e){return u(e,"iterate",g(e)?"length":m),Reflect.ownKeys(e)}},We=class extends ee{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}},Ye=new Be,Ne=new We,U=e=>e,I=e=>Reflect.getPrototypeOf(e);function T(e,t,r=!1,s=!1){e=e.__v_raw;const n=c(e),a=c(t);r||(R(t,a)&&u(n,"get",t),u(n,"get",a));const{has:o}=I(n),i=s?U:r?N:Y;if(o.call(n,t))return i(e.get(t));if(o.call(n,a))return i(e.get(a));e!==n&&e.get(t)}function M(e,t=!1){const r=this.__v_raw,s=c(r),n=c(e);return t||(R(e,n)&&u(s,"has",e),u(s,"has",n)),e===n?r.has(e):r.has(e)||r.has(n)}function S(e,t=!1){return e=e.__v_raw,!t&&u(c(e),"iterate",m),Reflect.get(e,"size",e)}function te(e){e=c(e);const t=c(this);return I(t).has.call(t,e)||(t.add(e),h(t,"add",e,e)),this}function re(e,t){t=c(t);const r=c(this),{has:s,get:n}=I(r);let a=s.call(r,e);a||(e=c(e),a=s.call(r,e));const o=n.call(r,e);return r.set(e,t),a?R(t,o)&&h(r,"set",e,t,o):h(r,"add",e,t),this}function ne(e){const t=c(this),{has:r,get:s}=I(t);let n=r.call(t,e);n||(e=c(e),n=r.call(t,e));const a=s?s.call(t,e):void 0,o=t.delete(e);return n&&h(t,"delete",e,void 0,a),o}function se(){const e=c(this),t=e.size!==0,r=void 0,s=e.clear();return t&&h(e,"clear",void 0,void 0,r),s}function A(e,t){return function(s,n){const a=this,o=a.__v_raw,i=c(o),l=t?U:e?N:Y;return!e&&u(i,"iterate",m),o.forEach((f,d)=>s.call(n,l(f),l(d),a))}}function P(e,t,r){return function(...s){const n=this.__v_raw,a=c(n),o=C(a),i=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,f=n[e](...s),d=r?U:t?N:Y;return!t&&u(a,"iterate",l?K:m),{next(){const{value:v,done:x}=f.next();return x?{value:v,done:x}:{value:i?[d(v[0]),d(v[1])]:d(v),done:x}},[Symbol.iterator](){return this}}}}function p(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ge(){const e={get(a){return T(this,a)},get size(){return S(this)},has:M,add:te,set:re,delete:ne,clear:se,forEach:A(!1,!1)},t={get(a){return T(this,a,!1,!0)},get size(){return S(this)},has:M,add:te,set:re,delete:ne,clear:se,forEach:A(!1,!0)},r={get(a){return T(this,a,!0)},get size(){return S(this,!0)},has(a){return M.call(this,a,!0)},add:p("add"),set:p("set"),delete:p("delete"),clear:p("clear"),forEach:A(!0,!1)},s={get(a){return T(this,a,!0,!0)},get size(){return S(this,!0)},has(a){return M.call(this,a,!0)},add:p("add"),set:p("set"),delete:p("delete"),clear:p("clear"),forEach:A(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=P(a,!1,!1),r[a]=P(a,!0,!1),t[a]=P(a,!1,!0),s[a]=P(a,!0,!0)}),[e,r,t,s]}var[He,ke,qe,Ze]=Ge();function ae(e,t){const r=t?e?Ze:qe:e?ke:He;return(s,n,a)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?s:Reflect.get(b(r,n)&&n in s?r:s,n,a)}var Je={get:ae(!1,!1)},Qe={get:ae(!0,!1)},oe=new WeakMap,Xe=new WeakMap,ie=new WeakMap,et=new WeakMap;function tt(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rt(e){return e.__v_skip||!Object.isExtensible(e)?0:tt(Te(e))}function le(e){return B(e)?e:ue(e,!1,Ye,Je,oe)}function ce(e){return ue(e,!0,Ne,Qe,ie)}function ue(e,t,r,s,n){if(!E(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=n.get(e);if(a)return a;const o=rt(e);if(o===0)return e;const i=new Proxy(e,o===2?s:r);return n.set(e,i),i}function B(e){return!!(e&&e.__v_isReadonly)}function nt(e){return!!(e&&e.__v_isShallow)}function c(e){const t=e&&e.__v_raw;return t?c(t):e}function W(e){return Object.isExtensible(e)&&Pe(e,"__v_skip",!0),e}var Y=e=>E(e)?le(e):e,N=e=>E(e)?ce(e):e;function G(e){return!!(e&&e.__v_isRef===!0)}import{defineComponent as st,getCurrentInstance as at,h as ot}from"vue";import{ComponentUtil as _,_processOnChange as fe}from"ag-grid-community";import{markRaw as de,toRaw as it}from"vue";var lt=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ct=e=>`on${e.charAt(0).toUpperCase()}${e.substring(1,e.length)}`,he=e=>e&&(Object.isFrozen(e)?e:de(it(e))),ut=()=>{const e={};_.PUBLIC_EVENTS.map(n=>ct(lt(n))).forEach(n=>e[n]=void 0);const r={},s={modelValue:{handler(n,a){!this.gridCreated||!this.api||n!==a&&(n&&a&&n.length===a.length&&n.every((o,i)=>o===a[i])||fe({rowData:n},this.api))},deep:!0}};return _.ALL_PROPERTIES.filter(n=>n!="gridOptions").forEach(n=>{e[n]={default:_.VUE_OMITTED_PROPERTY},s[n]={handler(a,o){let i=a;n==="rowData"&&a!=_.VUE_OMITTED_PROPERTY&&(i=he(a)),this.batchChanges[n]=i===_.VUE_OMITTED_PROPERTY?void 0:i,this.batchTimeout==null&&(this.batchTimeout=setTimeout(()=>{this.batchTimeout=null,fe(this.batchChanges,this.api),this.batchChanges=de({})},0))},deep:!0}}),[e,r,s]};import{BaseComponentWrapper as ft,_warnOnce as dt}from"ag-grid-community";import{_errorOnce as ht}from"ag-grid-community";import{createVNode as pt,defineComponent as gt,render as pe}from"vue";function ge(e){ht(`Could not find component with name of ${e}. Is it in Vue.components?`)}var H=class we{static getComponentDefinition(t,r){let s;return typeof t=="string"?s=this.searchForComponentInstance(r,t):s={extends:gt({...t})},s||ge(t),s.extends?(s.extends.setup&&(s.setup=s.extends.setup),s.extends.props=this.addParamsToProps(s.extends.props)):s.props=this.addParamsToProps(s.props),s}static addParamsToProps(t){return!t||Array.isArray(t)&&t.indexOf("params")===-1?t=["params",...t||[]]:typeof t=="object"&&!t.params&&(t.params={type:Object}),t}static createAndMountComponent(t,r,s,n){const a=we.getComponentDefinition(t,s);if(!a)return;const{vNode:o,destroy:i,el:l}=this.mount(a,{params:Object.freeze(r)},s,n||{});return{componentInstance:o.component.proxy,element:l,destroy:i}}static mount(t,r,s,n){let a=pt(t,r);a.appContext=s.$.appContext,a.appContext.provides={...n,...a.appContext.provides?a.appContext.provides:{},...s.$parent.$options.provide?s.$parent.$options.provide:{}};let o=document.createElement("div");return pe(a,o),{vNode:a,destroy:()=>{o&&pe(null,o),o=null,a=null},el:o}}static searchForComponentInstance(t,r,s=10,n=!1){let a=null,o=t.$parent,i=0;for(;!a&&o&&o.$options&&++i<s;){const l=o;l.$options&&l.$options.components&&l.$options.components[r]?a=l.$options.components[r]:l[r]&&(a=l[r]),o=o.$parent}if(!a){const l=t.$.appContext.components;l&&l[r]&&(a=l[r])}return!a&&!n?(ge(r),null):a}},mt=class D extends ft{constructor(t,r){super(),this.parent=t,D.provides||(D.provides=r)}createWrapper(t){const r=this;class s extends wt{init(o){super.init(o)}hasMethod(o){const i=n.getFrameworkComponentInstance();return i[o]?!0:i.$.setupState[o]!=null}callMethod(o,i){const l=this.getFrameworkComponentInstance(),f=n.getFrameworkComponentInstance();return f[o]?f[o].apply(l,i):f.$.setupState[o]?.apply(l,i)}addMethod(o,i){n[o]=i}processMethod(o,i){return o==="refresh"&&(this.getFrameworkComponentInstance().params=i[0]),this.hasMethod(o)?this.callMethod(o,i):o==="refresh"}createComponent(o){return r.createComponent(t,o)}}const n=new s;return n}createComponent(t,r){return H.createAndMountComponent(t,r,this.parent,D.provides)}createMethodProxy(t,r,s){return function(){return t.hasMethod(r)?t.callMethod(r,arguments):(s&&dt("Framework component is missing the method "+r+"()"),null)}}destroy(){this.parent=null}},wt=class{getGui(){return this.element}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.unmount()}getFrameworkComponentInstance(){return this.componentInstance}init(e){const{componentInstance:t,element:r,destroy:s}=this.createComponent(e);this.componentInstance=t,this.unmount=s,this.element=r.firstElementChild??r}};import{VanillaFrameworkOverrides as _t}from"ag-grid-community";var vt=class extends _t{constructor(e){super("vue"),this.parent=e}frameworkComponent(e,t){let r=H.searchForComponentInstance(this.parent,e,10,!0)?e:null;if(!r&&t&&t[e]){const s=t[e];r=H.searchForComponentInstance(this.parent,s,10,!0)?s:null}return r}isFrameworkComponent(e){return typeof e=="object"}},bt=new Set(["rowDataUpdated","cellValueChanged","rowValueChanged"]),me="onUpdate:modelValue",Ct="update:modelValue",[Et,yt,Rt]=ut(),Ot=st({render(){return ot("div")},props:{gridOptions:{type:Object,default:()=>({})},componentDependencies:{type:Array,default:()=>[]},plugins:[],modules:{type:Array,default:()=>[]},modelValue:{type:Array,default:void 0,required:!1},...Et},data(){return{api:void 0,gridCreated:!1,isDestroyed:!1,gridReadyFired:!1,emitRowModel:void 0,batchTimeout:null,batchChanges:W({})}},computed:yt,watch:Rt,methods:{globalEventListenerFactory(e){return t=>{if(this.isDestroyed)return;t==="gridReady"&&(this.gridReadyFired=!0);const r=_e.has(t);r&&!e||!r&&e||this.updateModelIfUsed(t)}},processChanges(e,t,r){if(this.gridCreated){if(this.skipChange(e,t,r))return;const s={[e]:e==="rowData"?Object.isFrozen(t)?t:W(c(t)):t};Ce(s,this.api)}},checkForBindingConflicts(){const e=this;(e.rowData&&e.rowData!=="AG-VUE-OMITTED-PROPERTY"||this.gridOptions.rowData)&&e.modelValue&&Ee("Using both rowData and v-model. rowData will be ignored.")},getRowData(){const e=[];return this.api?.forEachNode(t=>{e.push(t.data)}),e},updateModelIfUsed(e){this.gridReadyFired&&this.$attrs[me]&&bt.has(e)&&this.emitRowModel&&this.emitRowModel()},getRowDataBasedOnBindings(){const e=this,t=e.modelValue;return t||(e.rowData?e.rowData:e.gridOptions.rowData)},getProvides(){let e=at(),t={};for(;e;)e&&e.provides&&(t={...t,...e.provides}),e=e.parent;return t},skipChange(e,t,r){if(this.gridReadyFired&&e==="rowData"&&this.$attrs[me]){if(t===r)return!0;if(t&&r){const s=t,n=r;if(s.length===n.length){for(let a=0;a<s.length;a++)if(s[a]!==n[a])return!1;return!0}}}return!1},debounce(e,t){let r;return()=>{const s=function(){e()};window.clearTimeout(r),r=window.setTimeout(s,t)}}},mounted(){this.emitRowModel=this.debounce(()=>{this.$emit(Ct,Object.freeze(this.getRowData()))},20);const e=this.getProvides(),t=new mt(this,e),r=W(be(c(this.gridOptions),this));this.checkForBindingConflicts();const s=this.getRowDataBasedOnBindings();s!==ve.VUE_OMITTED_PROPERTY&&(r.rowData=he(s));const n={globalEventListener:this.globalEventListenerFactory().bind(this),globalSyncEventListener:this.globalEventListenerFactory(!0).bind(this),frameworkOverrides:new vt(this),providedBeanInstances:{frameworkComponentWrapper:t},modules:this.modules};this.api=ye(this.$el,r,n),this.gridCreated=!0},unmounted(){this.gridCreated&&(this.api?.destroy(),this.isDestroyed=!0)}});export{Ot as AgGridVue};/*! Bundled license information:

@vue/shared/dist/shared.esm-bundler.js:
  (**
  * @vue/shared v3.4.26
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
  (*! #__NO_SIDE_EFFECTS__ *)

@vue/reactivity/dist/reactivity.esm-bundler.js:
  (**
  * @vue/reactivity v3.4.26
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
*/
